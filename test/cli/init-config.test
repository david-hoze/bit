# Setup: clean environment and initialize repo
rmdir /s /q test\cli\work 2>nul & mkdir test\cli\work & cd test\cli\work & bit init
<<<
>>> /Initialized/
>>>= 0

# Verify core.excludesFile was configured
cd test\cli\work & git -C .bit\index config --get core.excludesFile
<<<
>>> /\.bit/
>>>= 0

# Verify init.defaultBranch was set to "main"
cd test\cli\work & git -C .bit\index config --get init.defaultBranch
<<<
>>>
main
>>>= 0

# Verify merge driver was configured
cd test\cli\work & git -C .bit\index config --get merge.bit-metadata.driver
<<<
>>>
false
>>>= 0

# Verify bit status works after init (proves git commands work)
cd test\cli\work & bit status
<<<
>>>= 0

# Verify bit add works after init
cd test\cli\work & echo test> file.txt & bit add file.txt
<<<
>>>= 0

# Verify bit commit works after init
cd test\cli\work & bit commit -m "test commit"
<<<
>>> /\[main|master|file/
>>>= 0
